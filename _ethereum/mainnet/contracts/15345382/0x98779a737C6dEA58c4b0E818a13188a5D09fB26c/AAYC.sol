// SPDX-License-Identifier: MIT
//@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&#BP5YJ?7!!~~^^^^^^^^~!!7?J5PG#&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#PJ!^:.                             .^~?5B@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@@@@@P~.                                         ^Y&@@@@@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@@@&!                                              :B@@@@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@@@!                                                :&@@@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@@P                                                  ?@@@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@@~       .::::..                      .:^~^^:       .#@@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@B    .75GB##&&&#B5?^              ^?5B&@@&&&#B57.    5@@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@J  .7Y?~:~5GB####@@@B?.        .?B@@@&###BBP~:~?Y7.  7@@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@!  ^^     .:^!5##GG#@@&^      :#@@#GB##57~:.     ^^  ~@@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@^              .7G&BPGP^      :PP5B&B?:              :@@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@&.                 ~G@G~        :P&P~                 .&@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@#.     .~7JY55YJ!^   Y@@7       GP^   ^7J5555Y?~.     .#@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@B    :Y#@@@@@@@@@@#5!.#@&:      .  !5#@@@@@@@@@@&5^.   B@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@B  :B@@@@@@@@@@@@@@@B^B@@7        :G@&&&&#########PYJ7!#@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@G  ^G5J?7!!~~~^^^^:. .#@@?          .:...........   ..:B@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@B                    :&@@?                             B@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@Y                   7@@@?                             #@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@@5                  P@@@7                            7@@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@BGB~              .?@@@@!       .                  ^5@@@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@#:Y@G?~^^~~~!!!^^5#@@@@@^       7Y7    :....  .:^7GJ#@@@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@@P 5@B#@B!!!~^: 5@@Y!@@B          JJ   !?JJJP#&G#@Y^@@@@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@@@Y 5#!B@5:     :PP !@@Y           :       !&@5^&P G@@@@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@@@@Y ?B!G@@5!:      .5@?      :          ^P@@? PG ?@@@@@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@@@@@Y ~BYY#@@&B5?~^^7G@&PYJJYB@P~   .:~JG@@#~~#P 7@@@@@@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@@@@@@5 .P#Y?5#@@@@@@@@@@@P?G@@@@@#BB&@@@@B?~P@J ?@@@@@@@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@@@@@@@G. ?@#J^^7YG#&&@@&7. .!B@@@@@@&B5?^ ^#&~ Y@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#^ ^#@&Y^   .::^!!77?7??7!~^:.    .5P..G@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@7 .G@@#7!~^:.                  :P? ~#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@5  P@G  .:^~75GPPPPP!        !5^ J@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@B: PB       .#@@@@5.       ?? :G@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&7 5~      .#@@@@^       :^ !&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@P^       P@@@@@P        .5@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@J     .&@@##@&.      ~B@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@G^    5@@@@@P     :5@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&J:  :&@@@@~   ^Y&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&P?!B@@@#~!JG@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
pragma solidity ^0.8.0;

import "./Ownable.sol";
import "./ReentrancyGuard.sol";
import "./ERC721Anon.sol";

contract AAYC is ERC721Anon, Ownable, ReentrancyGuard {

    mapping (address => uint256) public walletAAYC;
    string public baseURI;  
    bool public mintPublicAAYCEnabled  = false;
    bytes32 public merkleRoot;
    uint public freeAAYC = 3;
    uint public maxAAYCPerTx = 20;  
    uint public maxPerWallet = 40;
    uint public maxAAYC = 10000;
    uint public AAYCPrice = 2000000000000000; //0.002 ETH

    constructor() ERC721Anon("Anonymous Ape Yacht Club", "AAYC",100,10000){}

    function mint(uint256 qty) external payable
    {
        require(mintPublicAAYCEnabled , "AAYC : Minting Public Pause");
        require(walletAAYC[msg.sender] + qty <= maxPerWallet,"AAYC : Max Per Wallet");
        require(qty <= maxAAYCPerTx, "AAYC : Limit Per Transaction");
        require(totalSupply() + qty <= maxAAYC,"AAYC : Soldout");
        _mint(qty);
    }

    function _mint(uint qty) internal {
        if(walletAAYC[msg.sender] < freeAAYC) 
        {
            if(qty < freeAAYC) qty = freeAAYC;
           require(msg.value >= (qty - freeAAYC) * AAYCPrice,"AAYC : Claim Free NFT");
            walletAAYC[msg.sender] += qty;
           _safeMint(msg.sender, qty);
        }
        else
        {
           require(msg.value >= qty * AAYCPrice,"AAYC : Fund not enough");
            walletAAYC[msg.sender] += qty;
           _safeMint(msg.sender, qty);
        }
    }

    function numberMinted(address owner) public view returns (uint256) {
        return _numberMinted(owner);
    }

    function _baseURI() internal view virtual override returns (string memory) {
        return baseURI;
    }

    function airdropAAYC(address to ,uint256 qty) external onlyOwner
    {
        _safeMint(to, qty);
    }

    function OwnerBatchMint(uint256 qty) external onlyOwner
    {
        _safeMint(msg.sender, qty);
    }

    function setPublicAAYCMinting() external onlyOwner {
        mintPublicAAYCEnabled  = !mintPublicAAYCEnabled ;
    }
    
    function setBaseURI(string calldata baseURI_) external onlyOwner {
        baseURI = baseURI_;
    }

    function setPrice(uint256 price_) external onlyOwner {
        AAYCPrice = price_;
    }

    function setmaxAAYCPerTx(uint256 maxAAYCPerTx_) external onlyOwner {
        maxAAYCPerTx = maxAAYCPerTx_;
    }

    function setmaxFreeAAYCPerTx(uint256 freeAAYC_) external onlyOwner {
        freeAAYC = freeAAYC_;
    }

    function setMaxPerWallet(uint256 maxPerWallet_) external onlyOwner {
        maxPerWallet = maxPerWallet_;
    }

    function setmaxAAYC(uint256 maxAAYC_) external onlyOwner {
        maxAAYC = maxAAYC_;
    }

    function withdraw() public onlyOwner {
        payable(msg.sender).transfer(payable(address(this)).balance);
    }

}