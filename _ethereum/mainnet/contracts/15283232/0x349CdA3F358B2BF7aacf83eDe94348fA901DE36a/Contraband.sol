//                                   .:::   JB#&@@B. G@G.                                             
//                                 7G&@@&B:.&@@P5J~ :&@#.            .7!.                             
//                                5@@P7!7!  G@@&&?  :&@B            :B@@J                             
//                                #@@^   :~.Y@@GJ?!.^@@#!!^        ^#@@@B  :!Y5!                      
//                  .^~.          !&@&P5B@@?^&@@&@&7.G#&@@#^      ^#@&&@&5B&@@@?                      
//                :Y#&#! .         .?PGBPJ~  :^^:.     ....       G@&~5@@&#@@@7    .^^.               
//                B@@YPB&#G!               .::^~!!77777!~~^:..    :!: .!~!#@&~ .~JG#@@P               
//           :77. ?&@@#P5@@@:        .^7YPB#&@@@@@@@@@@@&B&&P55Y?!:      5@B!?G&@@#@@@7 ~7^           
//           !@@G. .^^PB&@&?     ^75B&@@@#B@@@@@@@@@@@@@J :&#5J77J5P5J~.  . !#BG&@#@@Y  P@@5:         
//         ^!~?BP.    JPY7:  .~YB@@@@@@@7 ~@@@@@@@@@@@@@J .#@@@&GJ~.:75G57:     :G@@G   ~#@@&7        
//       7B@@G   .         ^Y#@@@@@@@@@&. ~@@@@@@@@@@@@@J .#@@@@@@@BJ:  ~YG5!.   J#P..?B@@GP@@?       
//      ~@@B^   G&P      7G@@@@@@@@@@@@&: ~@@@@@@@@@@@@@5 .#@@@@@@@@@@P~!5PBGGJ:    J@@&Y^  ^?J?^     
//      ^&@#!::J@@G    7B@@@@@@@@@@@@@@&: ~@@@@@@@@@@@@@P .#@@@@@@@@@@@@@G:Y#!YBY:  ~?!.  ^JG&@@@7    
//   :~: ^5&@@@@&Y.  ~B@@&@@@@@@@@@@@@@&: ~@@@@@@@@@@@@@B .#@@@@@@@@@@@@@P  #B :Y#?    ^P#@@@@Y5@@J   
//  .B@&#PJ??7!~.   Y@@G^G@@@@@@@@@@@@@@: !@@@@@@@@@@@@@# .#@@@@@@@@@@@@@P  G@~  ^BG:  ~&@@75#Y ?P?   
//   ^G@@@&&@&5    P@@B. #@@@@@@@@@@@@@@^ 7@@@@@@@@@@@@@# .#@@@@@@@@@@@@@P  G@J    P#^  ^#@#.    ^~^  
//    :P@@#?!?~   P@@@G .#@@@@@@@@@@@@@@^ ?@@@@@@@@@@@@@B .#@@@@@@@@@@@@@5  B@G     5&:  :?7^^ !#@@@G^
//?PB#&&@&#G.    Y@@@@G .&@@@@@@@@@@@@@&: J@@@@@@@@@@@@@B  #@@@@@@@@@@@@@P  B@@J     GB.   7@@?5@@?&@B
//Y#&@@@@BY!.   7@@@@@P :&@@@@@@@@@@@@@#. J@@@@@@@@@@@@@G  #@@@@@@@@@@@@@P  G@@@~    .&5   7@@GP@@~Y#Y
//  .^7YG#@&^  .&@@@@@Y :&@@@@@@@@@@@@@#  Y@@@@@@@@@@@@@P .#@@@@@@@@@@@@@B  G@@@B.    !@!   ?#@@#Y    
//        :.   ?@@@@@@J :&@@@@@@@@@@@@@B  J@@@@@@@@@@@@@P .&@@@@@@@@@@@@@#  G@@@@!     BG    .::.     
//             G@@@@@@J :&@@@@@@@@@@@@@B  ?@@@@@@@@@@@@@P :&@@@@@@@@@@@@@#. G@@@@P     ?@:            
//            .&@@@@@@Y .#@@@@@@@@@@@@@B  ?@@@@@@@@@@@@@P :&@@@@@@@@@@@@@#. B@@@@#.    :@!            
//            :@@@@@@@5 .#@@@@@@@@@@@@@B  ?@@@@@@@@@@@@@P ^@@@@@@@@@@@@@@#. B@@@@&.    .#7            
//            :@@@@@@@P  B@@@@@@@@@@@@@B  ?@@@@@@@@@@@@@G ^@@@@@@@@@@@@@@#. B@@@@&.     #?            
//            ^@@@@@@@P  B@@@@@@@@@@@@@#. ?@@@@@@@@@@@@@G :&@@@@@@@@@@@@@#. B@@@@&:     B?            
//            ^@@@@@@@P  B@@@@@@@@@@@@@&. 7@@@@@@@@@@@@@B .#@@@@@@@@@@@@@#. B@@@@&:     BJ            
//            ^@@@@@@@G  B@@@@@@@@@@@@@#. !@@@@@@@@@@@@@B  B@@@@@@@@@@@@@#. B@@@@&:     #J            
//            ^@@@@@@@G  B@@@@@@@@@@@@@B  !@@@@@@@@@@@@@B  G@@@@@@@@@@@@@B  #@@@@&.    .&?            
//            :@@@@@@@B  B@@@@@@@@@@@@@B  7@@@@@@@@@@@@@B  G@@@@@@@@@@@@@B  B@@@@&.    .&7            
//            :&@@@@@@B  B@@@&&@@@@@@@@B  7@@@@@@@@@@@@@B  P@@@@@@@@@@@@@B  B@@@@#.    .&7            
//            :&@@@@@@B  B@@JJ5PBBB#&@@#. 7@@@@@@@@@@@@@B  P@@@@##&@@&@@@B  B@@@@#.    :@7            
//            :&@@@@@@B  B@@G^.^JJ7!^^7G&PP@@@@@@@@@G?^5#  G@#J#J :?B5^7B@GJ#@@@@#.    :@!            
//            :&@@@@GBB  G@&Y57:^!J5~  .~?5B@@@@@@5^   Y&. G@5 .^   .^  .?~7B@@@@#.    :@!            
//            :&@@@P P#  G@#.!PB7           ^?G@@~ :~  Y&. G@J::            ^B@@@#.    :@7            
//            :&@@&: P#  P@&:  ..      .!:     ~5G75.  5&. G@7.?J     :!   ~..!P@#.    :@7            
//            :&@@P  P#  5@@~       ~.  :J?      !&P  .5@^ G@7  JP    .GJ  ~P   !&~    :@7            
//            :&@@5~^5#  5@@7 .:    ^P:   P#Y:    ~&~   5&.G@^   BJ    ^@^  P?   ?@7   :@7            
//            .&@@#5PP#  Y@@7  ~7    ~G.  ^@@&7    GP   :@B5~    5G    ^@~  55   ^@@?  :@!            
//            .&@@@#&@&~^P@&:   5!    PJ   B@@@Y.  G5  :5G~     .&?    PB   B?   .&@&~~?@!            
//             7JJJJJJJJY@@7    ~P    7#.  GBP@@&PG@#GB@G       GG   ~PG:  7@~   7@Y?????.            
//                      ?@#     ~B    ^&:  #J :~!^^?J&@@Y     ~BG~7YP5!   !@@#?7YB7                   
//                      5@&^   .GY    ~@: ~@~        7@@@577JB@@#J7~.   ^PB5GBG?~.                    
//                      ^B@&5?J#@!    PP ^#Y          ~J5PY7~?&@#^..^!JB@&:                           
//                       .~?J7J@@#Y?JB&?5G7                   7B&&&&###@@?                            
//                             ~&@&@@@@&!                       ~#@P: 7@&^                            
//                              :P@@@&5B&5:                    .&@&Y~J@#~                             
//                                !@@5. 7&&?.               :7G5#&@@@&Y.                              
//                                 ~B@5^^?#@&BPY!..^~~!!?7!P&@P?!B@B!.                                
//                                   7B&@@@@?~?JJG&@#GGGP5&B@&P#&G7.                                  
//                                     :!?G&BY7~5&@@P::^~7PB@BY!:                                     
//                                         :75GBBBB&&&&&#BPY!.                                        
pragma solidity ^0.8.4;

import "./ERC1155.sol";
import "./Ownable.sol";
import "./Pausable.sol";
import "./ERC1155Burnable.sol";
import "./ERC1155Supply.sol";
import "./ReentrancyGuard.sol";
import "./Strings.sol";

contract Contraband is
    ERC1155,
    Ownable,
    Pausable,
    ERC1155Burnable,
    ERC1155Supply,
    ReentrancyGuard 
{
    constructor(
        string memory _name,
        string memory _symbol
    ) ERC1155("") {
        name = _name;
        symbol = _symbol;
    }

    string public name;
    string public symbol;

    mapping (address => bool) public minters;
    string public URIbase;
    string public URISuffix;
    string public URIctr;
 

    function minterMint(
        address _to,
        uint256 _id,
        uint256 _amount,
        bytes memory data
    ) external nonReentrant {
        require(minters[msg.sender], "not authorised");
        _mint(_to, _id, _amount, data);
    }

    function uri(uint256 _tokenId) override public view returns(string memory) {
        return string(abi.encodePacked(URIbase,Strings.toString(_tokenId),URISuffix));
    }

    function contractURI() public view returns (string memory) {
        return string(abi.encodePacked(URIctr,URISuffix));
    }

    function _beforeTokenTransfer(
        address operator,
        address from,
        address to,
        uint256[] memory ids,
        uint256[] memory amounts,
        bytes memory data
    ) internal override(ERC1155, ERC1155Supply) whenNotPaused {
        super._beforeTokenTransfer(operator, from, to, ids, amounts, data);
    }

    function editMinters(address _minter, bool _flag) external onlyOwner{
        minters[_minter] = _flag;
    }

    function mint(
        address account,
        uint256 id,
        uint256 amount,
        bytes memory data
    ) public onlyOwner {
        _mint(account, id, amount, data);
    }

    function mintBatch(
        address to,
        uint256[] memory ids,
        uint256[] memory amounts,
        bytes memory data
    ) public onlyOwner {
        _mintBatch(to, ids, amounts, data);
    }

    function setURI(string memory _uri) external onlyOwner{
        URIbase=_uri;
    }

    function setSuffix(string memory _suffix, string memory _URIctr) public onlyOwner {
        URISuffix = _suffix;
        URIctr = _URIctr;
    }

    function pause() public onlyOwner {
        _pause();
    }

    function unpause() public onlyOwner {
        _unpause();
    }
}